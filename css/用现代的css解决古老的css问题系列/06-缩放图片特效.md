# 缩放图片特效

> 原文地址: 《[Animated Image Gallery Captions with Bonus Ken Burns Effect"](https://moderncss.dev/animated-image-gallery-captions-with-bonus-ken-burns-effect/)》

本文主要讨论：

- `object-fit`用于响应式图像缩放
- `CSS Grid` "hack" 升级 `position absolute`方式
- `CSS transforms` 动画效果

如果你曾经使用`jQuery`和`position: absolute`来解决图像标题文字动画的问题,或者通过处理元素的宽高动画来实现，如果你想在响应式的图片上实现，这次的升级非常适合你。

有关`object-fit`的介绍请看这篇文章（系列02）： 

[https://dev.to/5t3ph/css-only-full-width-responsive-images-2-ways-2njm](https://dev.to/5t3ph/css-only-full-width-responsive-images-2-ways-2njm)

## 基础HTML

下面是我们基础的`HTML`，它是一个`ul`，其中每个`li`"card"包含了图片和标题。

```html
<ul class="gallery">
  <li class="gallery-card">
    <img class="gallery-card__img" alt="" src="https://picsum.photos/400" />
    <p class="gallery-card__caption">Candy canes ice cream
    </p>
  </li>
  <li class="gallery-card">
    <img class="gallery-card__img" alt="" src="https://picsum.photos/600" />
    <p class="gallery-card__caption">Ice cream
      biscuit
    </p>
  </li>
  <li class="gallery-card">
    <img class="gallery-card__img" alt="" src="https://picsum.photos/650" />
    <p class="gallery-card__caption">Cream
      biscuit marzipan
    </p>
  </li>
</ul>
```

我使用不同大小的图片，既是为了展示`object-fit`如何适配它的容器，也是为了减少`picsum`服务中重复图片。

基础样式

由于我们使用了列表样式，所以我们需要删除默认的列表样式，同时我们还要将列表设置为`grid`容器。

```scss
.gallery {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  grid-gap: 2rem;
  grid-template-columns: repeat(auto-fit, minmax(20ch, 1fr));
  width: 100%;
  max-width: calc(40ch * 3 + 6rem);
}
```

这样初始的样式就完成了，首先将我们的列表项放在一行中，先不设置图片的样式

![basic style](https://tva1.sinaimg.cn/large/007S8ZIlly1gf4q0n0uqvj31oc0ru4qp.jpg)

## card 和 Image 样式

如果你和我一样，并且在过去几年中尝试过这样做，你可能会把鼠标滚过房间，试图找出为什么`position:absolute`不能很好地处理`jQuery`动画。

`CSS Grid`和`CSS transforms`在这里来拯救你了! 🎉

我们将`card`设置`grid`样式，并设置一个高度。而我们仍然会使用`overflow: hidden`, 来确保标题最初隐藏`image`内容中。

```scss
.gallery-card {
  display: grid;
  overflow: hidden;
  height: 40vh;

  // Purely for visual appeal
  border: 1px solid #c9c9c9;
  border-radius: 7px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
}
```

接下来，我们在`image`上设置`object-fit`与`width: 100%`和`height: 40vh`,使之与`card`的尺寸相适应。`object-fit: cover`的神奇之处在于不会使图片变形。

```scss
.gallery-card__img {
  object-fit: cover;
  width: 100%;
  height: 40vh;

  // 去除了图像底部多余的默认间距
  display: block;
}
```

![image style](https://tva1.sinaimg.cn/large/007S8ZIlly1gf4qhcj31wj31te0j61kx.jpg)

## 图片标题定位

现在，根据`Grid`布局的作用，标题已经自然地流到了图像下方,假定它应该是在自己的 "单元格"里，而默认的`grid items`是沿着Y轴流动的。

![title position](https://tva1.sinaimg.cn/large/007S8ZIlly1gf4qmu97xcj31800lqk9p.jpg)



