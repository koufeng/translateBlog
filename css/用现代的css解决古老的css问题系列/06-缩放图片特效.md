# ç¼©æ”¾å›¾ç‰‡ç‰¹æ•ˆ

> åŸæ–‡åœ°å€: ã€Š[Animated Image Gallery Captions with Bonus Ken Burns Effect"](https://moderncss.dev/animated-image-gallery-captions-with-bonus-ken-burns-effect/)ã€‹

æœ¬æ–‡ä¸»è¦è®¨è®ºï¼š

- `object-fit`ç”¨äºå“åº”å¼å›¾åƒç¼©æ”¾
- `CSS Grid` "hack" å‡çº§ `position absolute`æ–¹å¼
- `CSS transforms` åŠ¨ç”»æ•ˆæœ

å¦‚æœä½ æ›¾ç»ä½¿ç”¨`jQuery`å’Œ`position: absolute`æ¥è§£å†³å›¾åƒæ ‡é¢˜æ–‡å­—åŠ¨ç”»çš„é—®é¢˜,æˆ–è€…é€šè¿‡å¤„ç†å…ƒç´ çš„å®½é«˜åŠ¨ç”»æ¥å®ç°ï¼Œå¦‚æœä½ æƒ³åœ¨å“åº”å¼çš„å›¾ç‰‡ä¸Šå®ç°ï¼Œè¿™æ¬¡çš„å‡çº§éå¸¸é€‚åˆä½ ã€‚

æœ‰å…³`object-fit`çš„ä»‹ç»è¯·çœ‹è¿™ç¯‡æ–‡ç« ï¼ˆç³»åˆ—02ï¼‰ï¼š 

[https://dev.to/5t3ph/css-only-full-width-responsive-images-2-ways-2njm](https://dev.to/5t3ph/css-only-full-width-responsive-images-2-ways-2njm)

## åŸºç¡€HTML

ä¸‹é¢æ˜¯æˆ‘ä»¬åŸºç¡€çš„`HTML`ï¼Œå®ƒæ˜¯ä¸€ä¸ª`ul`ï¼Œå…¶ä¸­æ¯ä¸ª`li`"card"åŒ…å«äº†å›¾ç‰‡å’Œæ ‡é¢˜ã€‚

```html
<ul class="gallery">
  <li class="gallery-card">
    <img class="gallery-card__img" alt="" src="https://picsum.photos/400" />
    <p class="gallery-card__caption">Candy canes ice cream
    </p>
  </li>
  <li class="gallery-card">
    <img class="gallery-card__img" alt="" src="https://picsum.photos/600" />
    <p class="gallery-card__caption">Ice cream
      biscuit
    </p>
  </li>
  <li class="gallery-card">
    <img class="gallery-card__img" alt="" src="https://picsum.photos/650" />
    <p class="gallery-card__caption">Cream
      biscuit marzipan
    </p>
  </li>
</ul>
```

æˆ‘ä½¿ç”¨ä¸åŒå¤§å°çš„å›¾ç‰‡ï¼Œæ—¢æ˜¯ä¸ºäº†å±•ç¤º`object-fit`å¦‚ä½•é€‚é…å®ƒçš„å®¹å™¨ï¼Œä¹Ÿæ˜¯ä¸ºäº†å‡å°‘`picsum`æœåŠ¡ä¸­é‡å¤å›¾ç‰‡ã€‚

åŸºç¡€æ ·å¼

ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†åˆ—è¡¨æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ é™¤é»˜è®¤çš„åˆ—è¡¨æ ·å¼ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜è¦å°†åˆ—è¡¨è®¾ç½®ä¸º`grid`å®¹å™¨ã€‚

```scss
.gallery {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  grid-gap: 2rem;
  grid-template-columns: repeat(auto-fit, minmax(20ch, 1fr));
  width: 100%;
  max-width: calc(40ch * 3 + 6rem);
}
```

è¿™æ ·åˆå§‹çš„æ ·å¼å°±å®Œæˆäº†ï¼Œé¦–å…ˆå°†æˆ‘ä»¬çš„åˆ—è¡¨é¡¹æ”¾åœ¨ä¸€è¡Œä¸­ï¼Œå…ˆä¸è®¾ç½®å›¾ç‰‡çš„æ ·å¼

![basic style](https://tva1.sinaimg.cn/large/007S8ZIlly1gf4q0n0uqvj31oc0ru4qp.jpg)

## card å’Œ Image æ ·å¼

å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œå¹¶ä¸”åœ¨è¿‡å»å‡ å¹´ä¸­å°è¯•è¿‡è¿™æ ·åšï¼Œä½ å¯èƒ½ä¼šæŠŠé¼ æ ‡æ»šè¿‡æˆ¿é—´ï¼Œè¯•å›¾æ‰¾å‡ºä¸ºä»€ä¹ˆ`position:absolute`ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†`jQuery`åŠ¨ç”»ã€‚

`CSS Grid`å’Œ`CSS transforms`åœ¨è¿™é‡Œæ¥æ‹¯æ•‘ä½ äº†! ğŸ‰

æˆ‘ä»¬å°†`card`è®¾ç½®`grid`æ ·å¼ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªé«˜åº¦ã€‚è€Œæˆ‘ä»¬ä»ç„¶ä¼šä½¿ç”¨`overflow: hidden`, æ¥ç¡®ä¿æ ‡é¢˜æœ€åˆéšè—`image`å†…å®¹ä¸­ã€‚

```scss
.gallery-card {
  display: grid;
  overflow: hidden;
  height: 40vh;

  // Purely for visual appeal
  border: 1px solid #c9c9c9;
  border-radius: 7px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
}
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨`image`ä¸Šè®¾ç½®`object-fit`ä¸`width: 100%`å’Œ`height: 40vh`,ä½¿ä¹‹ä¸`card`çš„å°ºå¯¸ç›¸é€‚åº”ã€‚`object-fit: cover`çš„ç¥å¥‡ä¹‹å¤„åœ¨äºä¸ä¼šä½¿å›¾ç‰‡å˜å½¢ã€‚

```scss
.gallery-card__img {
  object-fit: cover;
  width: 100%;
  height: 40vh;

  // å»é™¤äº†å›¾åƒåº•éƒ¨å¤šä½™çš„é»˜è®¤é—´è·
  display: block;
}
```

![image style](https://tva1.sinaimg.cn/large/007S8ZIlly1gf4qhcj31wj31te0j61kx.jpg)

## å›¾ç‰‡æ ‡é¢˜å®šä½

ç°åœ¨ï¼Œæ ¹æ®`Grid`å¸ƒå±€çš„ä½œç”¨ï¼Œæ ‡é¢˜å·²ç»è‡ªç„¶åœ°æµåˆ°äº†å›¾åƒä¸‹æ–¹,å‡å®šå®ƒåº”è¯¥æ˜¯åœ¨è‡ªå·±çš„ "å•å…ƒæ ¼"é‡Œï¼Œè€Œé»˜è®¤çš„`grid items`æ˜¯æ²¿ç€Yè½´æµåŠ¨çš„ã€‚

![title position](https://tva1.sinaimg.cn/large/007S8ZIlly1gf4qmu97xcj31800lqk9p.jpg)

 åˆ©ç”¨ `CSS transforms` å±æ€§æ¥è®¾ç½®æ ‡é¢˜çš„åˆå§‹ä½ç½®ï¼š
 
```scss
.gallery-card__caption {
  margin: 0;
  transform: translateY(100%);
}
```

ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯`p`æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå»æ‰äº†`margin`ï¼Œä»¥é˜²æ­¢å®ƒå¯¹æ ‡é¢˜çš„é«˜åº¦äº§ç”Ÿä¸åˆ©å½±å“ã€‚`translate`çš„å€¼ä¸º100%ï¼Œä¼šä½¿å…ƒç´ ç›¸å¯¹äºå®ƒæ‰€æ”¾ç½®çš„è½´çº¿`100%`ç§»åŠ¨ã€‚æ‰€ä»¥ï¼ŒtranslateY(100%)ä¼šæœ‰æ•ˆåœ°å°†æ ‡é¢˜ "å‘ä¸‹"ç§»å‡ºåˆå§‹è§†å›¾ã€‚

## æ·»åŠ æ ‡é¢˜åŠ¨ç”»

æˆ‘ä»¬åœ¨`hover`æ—¶è§¦å‘åŠ¨ç”»ï¼Œæˆ‘ä»¬å¸Œæœ›çš„çœ‹åˆ°çš„æ•ˆæœæ˜¯å¯ä»¥é¡ºåˆ©çš„è§¦å‘æ˜¾ç¤ºåŠ¨ç”»ï¼Œç„¶ååœ¨è¿”å›åˆ°å¤–é¢åˆå§‹çŠ¶æ€ï¼Œæœ‰ä¸¤ä¸ªå±æ€§å¯ä»¥å¸®åŠ©å®ç°è¿™ä¸ªç›®æ ‡ï¼š`transition` å’Œ `will-change`

``` scss
.gallery-card__caption {
  // ... existing styles
  transition: transform 800ms ease-in;
  will-change: transform;

  // other
  text-align: right;
  padding: 0.25em 0.5em;
  border-radius: 4px 0 0 0;
  background-color: rgba(#fff, 0.87);
}
```

æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª`800ms`è¿‡æ¸¡æ—¶é—´ï¼Œå¹¶ä¸”è®¾ç½®`ease-in`è¿‡æ¸¡æ•ˆæœ,ç„¶åæˆ‘ä»¬ä½¿ç”¨`will-change`å±æ€§ä½œä¸ºä¸€ä¸ªé¢å¤–çš„æç¤ºï¼Œå¦‚æœæµè§ˆå™¨èƒ½å¤Ÿå¯¹è¯¥å±æ€§è¿›è¡Œä¼˜åŒ–çš„è¯ï¼Œæˆ‘ä»¬ä¼šå¯¹å˜æ¢å±æ€§è¿›è¡Œä¿®æ”¹ï¼Œä»¥å®ç°æ›´å¹³æ»‘çš„è¿‡æ¸¡ã€‚

`:hover`æ ·å¼å®é™…ä¸Šå°†è¢«æ”¾ç½®åœ¨`.gallery-card`ä¸Š,å› ä¸ºå®ƒæ˜¯åŒ…å«çš„å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ª `transform`å±æ€§ï¼Œç”¨æ¥å°†æ ‡é¢˜è¿˜åŸåˆ°åˆå§‹çŠ¶æ€

```scss
.gallery-card:hover {
  .gallery-card__caption {
    transform: translateY(0);
  }
}
```

ç°åœ¨æˆ‘ä»¬æ ‡é¢˜æœ‰äº†åŸºæœ¬åŠ¨ç”»æ ·å¼ï¼š

![Animating the Caption](https://tva1.sinaimg.cn/large/007S8ZIlly1gf5svvy1gug30a008sawn.gif)

## image Ken Burns åŠ¨ç”»æ•ˆæœ

ä½ å¯èƒ½ä¸çŸ¥é“è¿™ä¸ªåå­—ï¼Œä½†ä½ çœ‹åˆ°è¿‡è¿™æ ·çš„æ•ˆæœï¼šæ…¢é€Ÿã€æµç•…çš„å¹³ç§»å’Œå˜ç„¦ç»„åˆçš„é™æ­¢ç”»é¢ï¼Œç”±äºè¢«çºªå½•ç‰‡åˆ¶ä½œäºº[è‚¯-ä¼¯æ©æ–¯ï¼ˆKen Burnsï¼‰](https://en.wikipedia.org/wiki/Ken_Burns)æ¨å¹¿è€Œå¾—åã€‚

åˆ©ç”¨æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡çš„`transition`å’Œ`tranform`å±æ€§çš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨`.gallery-card__img`ä¸Šå†æ¬¡å°†å®ƒä»¬ç»“åˆèµ·æ¥ï¼Œåœ¨æ‚¬åœæ—¶ä¹Ÿå¯ä»¥æ·»åŠ è¿™ç§æ•ˆæœã€‚

æˆ‘ä»¬æ·»åŠ äº†é¢å¤–çš„`transform`å±æ€§ï¼Œå°†åˆå§‹å›¾åƒæŒ‰æ¯”ä¾‹æ”¾å¤§1.2å€ï¼Œä»¥ç¡®ä¿å›¾åƒå¯ä»¥å¹³ç§»ï¼Œå¦‚æœä¸è¿™æ ·è®¾ç½®çš„è¯ï¼Œä¸€æ—¦æˆ‘ä»¬å¹³ç§»å›¾ç‰‡å°†æ— æ³•è¦†ç›–åŸæ¥çš„å†…å®¹ã€‚

```scss
.gallery-card__img {
  transform: scale(1.2) translate(5%, 0);
  transition: transform 1200ms ease-in;
  will-change: transform;
}
```

æ­¤å¤–ï¼Œæˆ‘ä»¬é¦–å…ˆè®¾ç½®ä¸€ä¸ª5%çš„xåç§»é‡ï¼Œä¹Ÿå°±æ˜¯å°†å›¾åƒå‘å³æ‹‰5%ã€‚è¿™è¢«åº”ç”¨åˆ°å›¾ç‰‡çš„ç¼©æ”¾å¤§å°ä¸Šã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨`.gallery-card`ä¸­æ·»åŠ äº†`:hover` `transform`ï¼Œé™¤äº†åœ¨xè½´ä¸Šå‘å·¦æ‹‰å›-1%ï¼Œåœ¨yè½´ä¸Šå‘å³æ‹‰å›-3%ä¹‹å¤–ï¼Œæ¥å®ç°ç¼©æ”¾æ•ˆæœã€‚

```scss
.gallery-card:hover {
  .gallery-card__img {
    transform: scale(1.3) translate(-1%, -3%);
  }
}
```

å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µæ¥è®¾ç½®å€¼çš„å¤§å°

è¿˜æœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬æŠŠè¿‡æ¸¡æ—¶é•¿è®¾ç½®æˆäº†`400ms`çš„å·®å€¼ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå€¼ä½œä¸ºæ ‡é¢˜çš„å»¶æ—¶æ¥æ·»åŠ ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå»¶è¿Ÿé€‚ç”¨äºæ‚¬åœè¿‡æ¸¡ä¹‹å‰çš„è¿‡æ¸¡ï¼Œè€Œåœ¨è¿‡æ¸¡ç»“æŸçš„æ—¶å€™ï¼Œåˆ™æ˜¯åœ¨æ‚¬åœçš„æ—¶å€™ã€‚æˆ‘ä¸ªäººå¾ˆå–œæ¬¢è¿™ç§æ•ˆæœï¼Œå› ä¸ºè¿™æ„å‘³ç€ä¸¤ä¸ªåœ°æ–¹çš„åŠ¨ç”»éƒ½ä¼šä¸€èµ·ç»“æŸã€‚

```scss
.gallery-card__caption {
  // æ›´æ–°ï¼Œæ·»åŠ å»¶è¿Ÿä½œä¸ºç¬¬ä¸€ä¸ªå€¼
  transition: 400ms transform 800ms ease-in;
}
```

## ä¸è¦å¿˜äº† :focus

`Hover`å¯¹äºä½¿ç”¨é¼ æ ‡çš„äººæ¥è¯´æ˜¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºé‚£äº›å› ä¸ºå„ç§åŸå› ä¸»è¦ä½¿ç”¨é”®ç›˜å¯¼èˆªçš„äººæ¥è¯´å‘¢ï¼Ÿ

`li`å…ƒç´ æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªå¯èšç„¦çš„å…ƒç´ ï¼Œæ‰€ä»¥ä»…ä»…æ·»åŠ `:focus`æ ·å¼å¹¶ä¸èƒ½æ”¹å˜è¡Œä¸ºã€‚

æˆ‘ä»¬é¦–å…ˆéœ€è¦ç»™æ¯ä¸ª`li`å…ƒç´ æ·»åŠ `tabindex="0"`ï¼Œè¿™å°†ä½¿å®ƒä»¬æˆä¸ºå¯èšç„¦å…ƒç´ ã€‚

```html
<li class="gallery-card" tabindex="0">
```

ä½ å¯ä»¥é€šè¿‡`tab`æ¥æµ‹è¯•è§¦å‘åŠ¨ç”»æ•ˆæœ

æˆ‘ä»¬ä¼šåˆ é™¤`tabindex="0"`è€Œæ˜¯ç”¨ `:focus`è¾¾åˆ°åŒæ ·çš„æ•ˆæœ

```scss
.gallery-card:focus {
  outline: none;
}

.gallery-card:hover,
.gallery-card:focus {
  // ...
}
```

## Optional

è¿™ç§é£æ ¼è¿˜æœ‰ä¸€ç§æ•ˆæœ--åœ¨å›¾åƒçš„è¾¹æ¡†ä¸Šæœ‰æŸ”å’Œçš„é»‘è‰²æ¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`box-shadow`çš„`inset`çš„å±æ€§å®Œæˆæ­¤æ“ä½œã€‚`box-shadow`æ— æ³•ç›´æ¥ä½œç”¨äºå›¾åƒå…ƒç´ ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶åº”ç”¨äº`.gallery-card`çš„`:after`ä¼ªå…ƒç´ ä¸Š

```scss
.gallery-card:after {
  content: "";
  grid-area: card;
  width: 100%;
  height: 100%;
  box-shadow: inset 0 0 2rem 1rem rgba(black, 0.5);
  z-index: 1;
}
```

è®¾ç½® `grid-area: card;`æ¥ç¡®ä¿å®ƒçš„é«˜åº¦å’Œå®½åº¦å æ®æ•´ä¸ªå¡ç‰‡çš„é«˜åº¦å’Œå®½åº¦ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€ä¸ª`z-index`ç¡®ä¿å›¾ç‰‡åœ¨å®¹å™¨ä¸Šæ–¹ã€‚

è¿™æ ·åšçš„å‰¯ä½œç”¨æ˜¯ï¼Œå®ƒè¦†ç›–äº†æ ‡é¢˜ï¼Œä½†æˆ‘ä»¬è¦å¤šåŠ ä¸€ä¸ª`z-index: 2;`æ¥æé«˜æ ‡é¢˜çš„ä¼˜å…ˆçº§ã€‚

```scss
.gallery-card__caption {
  z-index: 2;
}
```

codepenï¼š

[https://codepen.io/5t3ph/pen/xxwEXmE](https://codepen.io/5t3ph/pen/xxwEXmE)
